manifest {
    description = 'Rhometa pipeline'
    nextflowVersion = '>= 20.10.0'
}


process {
    container = 'sidkris/rmeta:latest'
    conda='environment.yaml'

    executor = 'pbs'
    scratch = true
    cpus  = 4
    memory = 12.GB
    time = 48.h

    // below 2 withLabel config options are for the lookup_table_gen.nf script
    withLabel: LDPOP_TABLE_GEN {
        cpus  = 4
        memory = 12.GB
        time = 48.h
    }

    withLabel: DOWNSAMPLE_LOOKUP_TABLE {
        // cpus must always be 1 for this process, it's single threaded but many instances/forks of the program is run in parallel
        cpus  = 1
        memory = 4.GB
        time = 2.h
    }
    
}


docker {
    enabled = false
}


singularity {
    enabled = false
}


tower {
    accessToken = 'eyJ0aWQiOiAzMDQxfS5jNWFjNmJkMjA3NTY5YWI1NjMxYWRiOTVkNWI3NDlhMGJkMTk3OTg4'
    enabled = true
}