manifest {
    description = 'Rhometa pipeline'
    nextflowVersion = '>= 20.10.0'
}


process {
    conda = 'environment.yaml'
    container = 'sidkris/rmeta:latest'

    executor = 'local'
    scratch = true
    cpus  = 4
    memory = 12.GB
    time = 72.h
    
    // below 2 withLabel config options are for the lookup_table_gen.nf script
    withLabel:ldpop_table_gen {
        cpus  = 4
        memory = 12.GB
        time = 48.h
    }

    withLabel:downsample_lookup_table {
        // cpus must always be 1 for this process, it's single threaded but many instances/forks of the program is run in parallel
        cpus  = 1
        memory = 4.GB
        time = 2.h
    }
}


docker {
    enabled = true
}


tower {
    accessToken = 'eyJ0aWQiOiAzMDQxfS5jNWFjNmJkMjA3NTY5YWI1NjMxYWRiOTVkNWI3NDlhMGJkMTk3OTg4'
    enabled = true
}