manifest {
    description = 'Rhometa pipeline'
    nextflowVersion = '>= 20.10.0'
}


process {
    conda = 'environment.yaml'
    container = 'sidkris/rmeta:latest'
    executor = 'pbs'
    scratch = true

    withName:LDPOP_TABLE_GEN {
        cpus  = 32
        memory = 256.GB
        time = 48.h
    }

    withName:DOWNSAMPLE_LOOKUP_TABLE {
        // cpus must always be 1 for this process, it's single threaded but many instances/forks of the program is run in parallel
        cpus  = 1
        memory = 16.GB
        time = 2.h
    }
}


docker {
    enabled = false
}


tower {
    accessToken = 'eyJ0aWQiOiAzMDQxfS5jNWFjNmJkMjA3NTY5YWI1NjMxYWRiOTVkNWI3NDlhMGJkMTk3OTg4'
    enabled = true
}